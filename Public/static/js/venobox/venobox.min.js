/*
 * VenoBox - jQuery Plugin
 * version: 1.5.3
 * @requires jQuery
 *
 * Examples at http://lab.veno.it/venobox/
 * License: MIT License
 * License URI: https://github.com/nicolafranchini/VenoBox/blob/master/LICENSE
 * Copyright 2013-2015 Nicola Franchini - @nicolafranchini
 *
 */
!function(a){function I(){a.ajax({url:i,cache:!1}).done(function(a){h.html('<div class="vbox-inline">'+a+"</div>"),O(!0)}).fail(function(){h.html('<div class="vbox-inline"><p>Error retrieving contents, please retry</div>'),O(!0)})}function J(){h.html('<iframe class="venoframe" src="'+i+'"></iframe>'),O()}function K(){var a=i.split("/"),b=a[a.length-1];h.html('<iframe class="venoframe" src="//player.vimeo.com/video/'+b+'"></iframe>'),O()}function L(){var a=i.split("/"),b=a[a.length-1];h.html('<iframe class="venoframe" allowfullscreen src="//www.youtube.com/embed/'+b+'"></iframe>'),O()}function M(){h.html('<div class="vbox-inline">'+a(i).html()+"</div>"),O()}function N(){y=a(".vbox-content").find("img"),y.one("load",function(){O()}).each(function(){this.complete&&a(this).load()})}function O(){d.html(z),h.find(">:first-child").addClass("figlio"),a(".figlio").css("width",o).css("height",p).css("padding",e).css("background",b),F=h.outerHeight(),E=a(window).height(),E>F+80?(t=(E-F)/2,h.css("margin-top",t),h.css("margin-bottom",t)):(h.css("margin-top","40px"),h.css("margin-bottom","40px")),h.animate({opacity:"1"},"slow")}function P(){a(".vbox-content").length&&(F=h.height(),E=a(window).height(),E>F+80?(t=(E-F)/2,h.css("margin-top",t),h.css("margin-bottom",t)):(h.css("margin-top","40px"),h.css("margin-bottom","40px")))}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,E,F,G,H;a.fn.extend({venobox:function(t){var y={framewidth:"",frameheight:"",border:"0",bgcolor:"",titleattr:"title",numeratio:!1,infinigroup:!1,overlayclose:!0},D=a.extend(y,t);return this.each(function(){var t=a(this);return t.data("venobox")?!0:(t.addClass("vbox-item"),t.data("venobox",!0),t.click(function(y){function E(){A=t.data("group"),r=a('.vbox-item[data-group="'+A+'"]'),r.length>0&&u===!0?(c.html(r.index(t)+1+" / "+r.length),c.show()):c.hide(),B=r.eq(r.index(t)+1),C=r.eq(r.index(t)-1),t.attr(D.titleattr)?(z=t.attr(D.titleattr),d.show()):(z="",d.hide()),r.length>0&&q===!0?(G=!0,H=!0,B.length<1&&(B=r.eq(0)),r.index(t)<1&&(C=r.eq(r.index(r.length)))):(B.length>0?(a(".vbox-next").css("display","block"),G=!0):(a(".vbox-next").css("display","none"),G=!1),r.index(t)>0?(a(".vbox-prev").css("display","block"),H=!0):(a(".vbox-prev").css("display","none"),H=!1))}function O(a){27===a.keyCode&&P()}function P(){a("body").removeClass("vbox-open"),a("body").unbind("keydown",O),w.animate({opacity:0},500,function(){w.remove(),s=!1,t.focus()})}var F,Q;return y.stopPropagation(),y.preventDefault(),t=a(this),v=t.data("overlay")||D.overlayColor||"",x=t.data("overlayclose")||D.overlayclose,o=t.data("width")||D.framewidth,p=t.data("height")||D.frameheight,e=t.data("border")||D.border,b=t.data("bgcolor")||D.bgcolor,q=t.data("infinigroup")||D.infinigroup,u=t.data("numeratio")||D.numeratio,b||"IMG"==this.tagName||(b="#fff"),G=!1,H=!1,s=!1,i=t.data("href")||t.attr("src")||t.attr("href"),m=t.data("css")||"",a("body").addClass("vbox-open"),f='<div class="vbox-overlay '+m+'" style="background:'+v+'"><div class="vbox-preloader">Loading...</div><div class="vbox-container"><div class="vbox-content"></div></div><div class="vbox-title"></div><div class="vbox-num">0/0</div><div class="vbox-close">X</div><div class="vbox-next">next</div><div class="vbox-prev">prev</div></div>',a("body").append(f),w=a(".vbox-overlay"),g=a(".vbox-container"),h=a(".vbox-content"),c=a(".vbox-num"),d=a(".vbox-title"),h.html(""),h.css("opacity","0"),E(),w.css("min-height",a(window).outerHeight()),w.animate({opacity:1},250,function(){"iframe"==t.data("type")?J():"inline"==t.data("type")?M():"ajax"==t.data("type")?I():"vimeo"==t.data("type")?K():"youtube"==t.data("type")?L():(h.html('<img src="'+i+'">'),N())}),F={prev:function(){s||(s=!0,v=C.data("overlay"),o=C.data("framewidth"),p=C.data("frameheight"),e=C.data("border"),b=C.data("bgcolor"),i=C.data("href")||C.attr("src")||C.attr("href"),z=C.attr(D.titleattr)?C.attr(D.titleattr):"",void 0===v&&(v=""),h.animate({opacity:0},500,function(){w.css("background",v),"iframe"==C.data("type")?J():"inline"==C.data("type")?M():"ajax"==C.data("type")?I():"youtube"==C.data("type")?L():"vimeo"==C.data("type")?K():(h.html('<img src="'+i+'">'),N()),t=C,E(),s=!1}))},next:function(){s||(s=!0,v=B.data("overlay"),o=B.data("framewidth"),p=B.data("frameheight"),e=B.data("border"),b=B.data("bgcolor"),i=B.data("href")||B.attr("src")||B.attr("href"),z=B.attr(D.titleattr)?B.attr(D.titleattr):"",void 0===v&&(v=""),h.animate({opacity:0},500,function(){w.css("background",v),"iframe"==B.data("type")?J():"inline"==B.data("type")?M():"ajax"==B.data("type")?I():"youtube"==B.data("type")?L():"vimeo"==B.data("type")?K():(h.html('<img src="'+i+'">'),N()),t=B,E(),s=!1}))}},a("body").keydown(function(a){37==a.keyCode&&1==H&&F.prev(),39==a.keyCode&&1==G&&F.next()}),a(".vbox-prev").click(function(){F.prev()}),a(".vbox-next").click(function(){F.next()}),Q=".vbox-close, .vbox-overlay",x||(Q=".vbox-close"),a(Q).click(function(b){j=".figlio",l=".vbox-prev",k=".vbox-next",n=".figlio *",a(b.target).is(j)||a(b.target).is(k)||a(b.target).is(l)||a(b.target).is(n)||P()}),a("body").keydown(O),!1}),void 0)})}}),a(window).resize(function(){P()})}(jQuery);