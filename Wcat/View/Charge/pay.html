<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>index</title>
    <link href="__PUBLIC__/Wcat/css/mui.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="__PUBLIC__/Wcat/css/iconfont.css"/>
    <link rel="stylesheet" href="__PUBLIC__/Wcat/css/style.css"/>
</head>
<body >
    <header class="mui-bar mui-bar-nav white">
        <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
        <h1 class="mui-title">二维码扫描</h1>
    </header>
    <div class="mui-content">
        <input type="text" name="aaa" value="<?php echo $signPackage['appId'];?>">
        <input type="text" name="aaa" value="<?php echo $signPackage['timestamp'];?>">
        <input type="text" name="aaa" value="<?php echo $signPackage['nonceStr'];?>">
        <input type="text" name="aaa" value="<?php echo $signPackage['signature'];?>">
        <a class="weui-btn weui-btn_primary submit-btn" id="scanQRCode">扫一扫</a>
    </div>
</body>
<script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js" ></script>
<script src="__PUBLIC__/Wcat/js/mui.min.js"></script>
<script>
window.onload=function(){
		wx.config({
            debug: false,
	        appId: '<?php echo $signPackage["appId"];?>',
	        timestamp: '<?php echo $signPackage["timestamp"];?>',
	        nonceStr: '<?php echo $signPackage["nonceStr"];?>',
	        signature: '<?php echo $signPackage["signature"];?>',
	        jsApiList: ['scanQRCode']
       	});
       	
       	wx.ready(function() {
	    	alert('成功');
			document.getElementById('scanQRCode').onclick = function() {
		    	alert('触发点击');
	            wx.scanQRCode({
	                needResult : 1, 
	                scanType : [ "qrCode"], 
	                success : function(res) {
		                var result = res.resultStr; 
		                window.location.href = result;
	                }
	            });
	        };

	    }); 
       	
       	
       
        wx.error(function(res) {
	        alert("出错了：" + res.errMsg);
	        alert('失败');
	    }) 
	    
      	
	   
	   

}
    

</script>
</html>
